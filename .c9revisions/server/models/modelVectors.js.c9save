{"ts":1353623973428,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1353624069564,"patch":[[{"diffs":[[1,"var dacFactory = require('../dac/dac');\nvar dacVectors= require('../dac/dacVectors');\n\n// GeoJSON Feature Collection\nvar FeatureCollection= function () {\n    this.type = 'FeatureCollection';\n    this.features = [];\n}\n\nvar UserFunctionsColl = [];\n\nmodule.exports = UserFunction;\n\nUserFunction.loadUserFunction = function (rows) {\n    UserFunctionsColl = [];\n    for (var r in rows) {\n        var userfunction = Object.create(UserFunction);\n        userfunction.ObjectName     = rows[r].functionname;\n        userfunction.Creationdate   = rows[r].creationdate;\n        userfunction.Sql            = rows[r].sql;\n        userfunction.Functype       = rows[r].functype;\n        UserFunctionsColl.push(userfunction);\n    }\n}\n\nUserFunction.getUserFunctions = function (config, email, callback) {\n\n    dacFactory.init(config, function (client) {\n        dacUserSources.getUserFunctions(client, email, function(data) {\n            UserFunction.loadUserFunction(data.rows);\n            callback(data = { obj: UserFunctionsColl, error: data.error } );\n        });\n\n    });\n}\n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":1067}]],"length":1067,"saved":false}
{"ts":1353624276333,"patch":[[{"diffs":[[0,"ors');\n\n"],[1,"var GeoJsonVector = {};\n\n"],[0,"// GeoJS"]],"start1":79,"start2":79,"length1":16,"length2":41},{"diffs":[[0,"llection"],[-1,""],[0,""],[1," "],[0,"= functi"]],"start1":155,"start2":155,"length1":16,"length2":17},{"diffs":[[0,"\n}\n\n"],[-1,"var UserFunctionsColl = [];\n\nmodule.exports = UserFunction;\n\nUserFunction"],[1,"module.exports = GeoJsonVector;\n\nGeoJsonVector"],[0,".loa"]],"start1":240,"start2":240,"length1":81,"length2":54},{"diffs":[[0,"    var "],[-1,"userfunction"],[1,"GeoJsonVector"],[0," = Objec"]],"start1":386,"start2":386,"length1":28,"length2":29},{"diffs":[[0,".create("],[-1,"UserFunction"],[1,"GeoJsonVector"],[0,");\n     "]],"start1":416,"start2":416,"length1":28,"length2":29}]],"length":1068,"saved":false}
{"ts":1353624322072,"patch":[[{"diffs":[[0,"        var "],[-1,"GeoJsonV"],[1,"geojsonv"],[0,"ector = Obje"]],"start1":382,"start2":382,"length1":32,"length2":32},{"diffs":[[0,"r);\n"],[-1,"        userfunction.ObjectName     = rows[r].functionname;\n        userfunction.Creationdate   = rows[r].creationdate;\n        userfunction.Sql            = rows[r].sql;\n        userfunction.Functype       = rows[r].functype;\n        UserFunctionsColl.push(userfunction);"],[0,"\n   "]],"start1":436,"start2":436,"length1":280,"length2":8}]],"length":796,"saved":false}
{"ts":1353624346409,"patch":[[{"diffs":[[0,"tor.load"],[-1,"UserFunction"],[1,"Features"],[0," = funct"]],"start1":287,"start2":287,"length1":28,"length2":24},{"diffs":[[0,"ector);\n"],[1,"        userfunction.ObjectName     = rows[r].functionname;\n        userfunction.Creationdate   = rows[r].creationdate;\n        userfunction.Sql            = rows[r].sql;\n        userfunction.Functype       = rows[r].functype;\n        UserFunctionsColl.push(userfunction);"],[0,"\n    }\n}"]],"start1":428,"start2":428,"length1":16,"length2":288}]],"length":1064,"saved":false}
{"ts":1353624399029,"patch":[[{"diffs":[[0,"    "],[-1,"UserFunctionsColl = [];\n    for (var r in rows) {\n        var geojsonvector = Object.create(GeoJsonVector"],[1,"var featureCollection = new FeatureCollection("],[0,");\n    "],[-1," "],[-1,"   userfunction.ObjectName     = rows[r].functionname;\n        userfunction.Creationdate   = rows[r].creationdate;\n        userfunction.Sql"],[1,"for (i = 0; i < result.rows.length; i++)\n"],[0,"    "],[1,"{\n"],[0,"        "],[-1,"= rows[r].sql;\n        userfunction.Functype       = rows[r].functype;\n        UserFunctionsColl.push(userfunction"],[1,"featureCollection.features[i] = JSON.parse(result.rows[i].the_geom"],[0,");\n    }"],[1," \n"],[0,"\n}\n\n"]],"start1":324,"start2":324,"length1":394,"length2":192}]],"length":862,"saved":false}
{"ts":1353624574734,"patch":[[{"diffs":[[0,"on ="],[-1," function ()"],[0," {\n    "],[-1,"this."],[0,"type"],[-1," ="],[1,":"],[0," 'Fe"]],"start1":161,"start2":161,"length1":38,"length2":20},{"diffs":[[0,"ion'"],[-1,";"],[1,","],[0,"\n    "],[-1,"this."],[0,"feat"]],"start1":193,"start2":193,"length1":19,"length2":14},{"diffs":[[0,"res "],[-1,"="],[1,":"],[0," []"],[-1,";"],[0,"\n}\n\n"]],"start1":208,"start2":208,"length1":13,"length2":12},{"diffs":[[0,") {\n"],[-1,"    var featureCollection = new FeatureCollection();"],[0,"\n   "]],"start1":296,"start2":296,"length1":60,"length2":8},{"diffs":[[0,"  {\n        "],[-1,"f"],[1,"F"],[0,"eatureCollec"]],"start1":348,"start2":348,"length1":25,"length2":25},{"diffs":[[0,"N.parse("],[-1,"result."],[0,"rows[i]."]],"start1":395,"start2":395,"length1":23,"length2":16},{"diffs":[[0,"\n}\n\n"],[-1,"UserFunction.getUserFunction"],[1,"GeoJsonVector.getGeoJsonVector"],[0,"s = "]],"start1":429,"start2":429,"length1":36,"length2":38}]],"length":781,"saved":false}
{"ts":1353624695414,"patch":[[{"diffs":[[0,"on ("],[-1,"config, email"],[1,"bounds, tablename, fieldname"],[0,", ca"]],"start1":473,"start2":473,"length1":21,"length2":36},{"diffs":[[0," dac"],[-1,"UserSources.getUserFunctions(client, email"],[1,"Vectors.getGeoJSONFromTable(client, tablename, fieldname"],[0,", fu"]],"start1":575,"start2":575,"length1":50,"length2":64},{"diffs":[[0,"    "],[-1,"UserFunction.loadUserFunction"],[1,"GeoJsonVector.loadFeatures"],[0,"(dat"]],"start1":662,"start2":662,"length1":37,"length2":34},{"diffs":[[0,"bj: "],[-1,"UserFunctionsColl"],[1,"FeatureCollection"],[0,", er"]],"start1":736,"start2":736,"length1":25,"length2":25}]],"length":807,"saved":false}
{"ts":1353624783613,"patch":[[{"diffs":[[0,"s : []\n}"],[1,";"],[0,"\n\nmodule"]],"start1":210,"start2":210,"length1":16,"length2":17}]],"length":808,"saved":false}
