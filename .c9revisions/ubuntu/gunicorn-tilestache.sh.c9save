{"ts":1350220480367,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1350220501892,"patch":[[{"diffs":[[1,"#!/bin/sh\r\n\r\n# SEE ALSO: http://gunicorn.org/\r\n\r\n# To make sure this runs at startup, do:\r\n# update-rc.d tilestache-gunicorn.sh defaults\r\n\r\nADDRESS=localhost:8000\r\nGUNICORN=/usr/local/bin/gunicorn\r\nDIRNAME=/FIXME/PATH/TOYOURCOPYOF/buildingequalsyes/tilestache/\r\nCONFIG=tilestache.cfg\r\nWORKERS=8\r\n\r\nPIDFILE=\"/var/run/tilefarm-gunicorn.pid\"\r\nLOGFILE=\"/var/log/tilefarm-gunicorn.log\"\r\nCOMMAND=\"$GUNICORN --daemon --user www-data --workers $WORKERS --worker-class egg:gunicorn#gevent_wsgi --bind $ADDRESS --log-file $LOGFILE\"\r\n\r\nstart_server () {\r\n  if [ -f $PIDFILE ]; then\r\n    #pid exists, check if running\r\n    if [ \"$(ps -p `cat $PIDFILE` | wc -l)\" -gt 1 ]; then\r\n       echo \"Server already running on ${ADDRESS}\"\r\n       return\r\n    fi\r\n  fi\r\n  echo \"starting ${ADDRESS}\"\r\n  cd $DIRNAME && $COMMAND --pid $PIDFILE \"TileStache:WSGITileServer('tilestache.cfg')\"\r\n}\r\n\r\nstop_server () {\r\n  if [ -f $PIDFILE ] && [ \"$(ps -p `cat $PIDFILE` | wc -l)\" -gt 1 ]; then\r\n    echo \"stopping server ${ADDRESS}\"\r\n    kill -9 `cat $PIDFILE`\r\n    rm $PIDFILE\r\n  else\r\n    if [ -f $PIDFILE ]; then\r\n      echo \"server ${ADDRESS} not running\"\r\n    else\r\n      echo \"No pid file found for server ${ADDRESS}\"\r\n    fi\r\n  fi\r\n}\r\n\r\nrestart_server () {\r\n  if [ -f $PIDFILE ] && [ \"$(ps -p `cat $PIDFILE` | wc -l)\" -gt 1 ]; then\r\n    echo \"gracefully restarting server ${ADDRESS}\"\r\n    kill -HUP `cat $PIDFILE`\r\n  else\r\n    if [ -f $PIDFILE ]; then\r\n      echo \"server ${ADDRESS} not running\"\r\n    else\r\n      echo \"No pid file found for server ${ADDRESS}\"\r\n    fi\r\n  fi\r\n}\r\n\r\ncase \"$1\" in\r\n'start')\r\n  start_server\r\n  ;;\r\n'stop')\r\n  stop_server\r\n  ;;\r\n'restart')\r\n  restart_server\r\n  ;;\r\n*)\r\n  echo \"Usage: $0 { start | stop | restart }\"\r\n  ;;\r\nesac\r\n\r\nexit 0"]],"start1":0,"start2":0,"length1":0,"length2":1737}]],"length":1737,"saved":false}
