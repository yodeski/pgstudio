{"ts":1354036827684,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var EditorClass = function (id) {\r\n    this.ID = id;\r\n\r\n};\r\n\r\nEditorClass.prototype = function() {\r\n\t\r\n\tvar editor = ace.editor(this.ID),\r\n    \r\n\t\tinitEditor = function() {\r\n\t\t\tvar self = this;\r\n            editor.getSession().setMode(\"ace/mode/yalm\");\r\n            editor.setTheme(\"ace/theme/xcode\");\r\n            editor.resize();\r\n\t\t\teditor.commands.addCommand({\r\n\t\t\t\tname: 'saveMap',\r\n\t\t\t\tbindKey: {win: 'Ctrl-S',  mac: 'Command-S'},\r\n\t\t\t\texec: function(editor) {\r\n\t\t\t\t\tvar text = editor.getValue();\r\n\t\t\t\t\tself.saveContent(tablename, text);\r\n\t\t\t\t}\r\n\t\t\t});\t\t\r\n\t\t\r\n\t\t},\r\n\t\t\r\n\t\tsetEditorContent = function (content) {\r\n            var editor = ace.edit(\"editor\");\r\n            editor.setValue(content);\r\n            editor.gotoLine(1);\t\t\r\n\t\t},\r\n\t\t\r\n\t\tgetEditorContent = function () {\r\n\t\t\tvar editor = ace.edit(\"editor\");\r\n            return editor.getValue();\r\n\t\t},\r\n\t\t\r\n        loadContent = function(filename) {\r\n            $.get('getMapFile', {mapfile: filename }, function (res) {               \r\n                setEditorContent(res);              \r\n            });\r\n        },\r\n\t\t\r\n        saveContent = function(filename, text) {\r\n            var text = this.getEditorContent();\r\n\t\t\t$.get('saveMapFile', {mapfile: filename, content: text }, function (res) {\r\n\t\t\t\treturn res;\r\n            });\r\n        };\r\n\t\t\r\n    return {\r\n        initEditor: initEditor,\r\n\t\tloadContent: loadContent,\r\n\t\tsaveContent: saveContent\r\n    };\t\t\r\n\r\n}();"]],"start1":0,"start2":0,"length1":0,"length2":1437}]],"length":1437}
