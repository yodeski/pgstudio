{"ts":1349090328793,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"define([\n    // Global application context.\n    \"app\",\n    \"backbone\",\n    \"bootstrap\",\n    \"modules/usersources\"\n],\n\n    function(app, Backbone, Bootstrap, UserSource) {\n\n        var LeftMenu = app.module({\n            //objectList: []\n        });\n\n        LeftMenu.Collection = Backbone.Collection.extend({\n            url: function() {\n                return \"/getMenu\";\n            },\n\n            parse: function(obj) {\n                if (!obj.error) {\n                    return obj.data;\n                }\n                return this.models;\n            },\n\n            initialize: function(models, options) {\n                this.fetch();\n            }\n        });\n\n        LeftMenu.Views.Item = Backbone.View.extend({\n            template: \"leftmenu/item\",\n            tagName: \"li\",\n            className:\"pointer clBlack lnh30\",\n\n            serialize: function() {\n\n                return { model: this.model };\n            },\n\n            events: {\n                click: \"initPopOver\"\n            },\n\n            initPopOver: function() {\n                var item = this.model;\n                this.$el.siblings().removeClass(\"active\");\n                this.$el.addClass(\"active\");\n                this.getContent().render();\n                //this.$el.clickover('show');\n                //alert(this.model.get('objectList'));\n            },\n            /*initPopOver: function() {\n                var item = this.model;\n                $.get(item.get('ref'), function(d) {\n                    //$(d).find('.scrollbar').scrollbar();\n                    this.$el.clickover({\n                        tip_id: item.get('itemname'),\n                        html: true,\n                        title: item.get('text'),\n                        trigger:'click',\n                        placement:'belowRight',\n                        allow_multiple:false,\n                        global_close: false,\n                        content: d\n                        //onShown: function() { self.setToolsToPopOver(model, elem) },\n                        //onHide: function() { $('ul#leftMenu li').removeClass('active') }\n                    });\n                    el.clickover('show');\n                    //$('.scrollbar').scrollbar();\n                });\n            },*/\n            showPopOver: function(ev) {\n\n            },\n\n            beforeRender: function() {\n                var url = this.model.get('ref');\n                var model = this.model;\n\n                //$.get(url, function(d) { model.set('objectList', d.objectList);});\n\n            },\n            afterRender:function() {\n                this.$el.siblings().removeClass(\"active\");\n                var model = this.model;\n                var child_view = UserSource.Views;\n\n                this.$el.clickover({\n                    tip_id: model.get('itemname'),\n                    html: true,\n                    title: model.get('text'),\n                    trigger:'click',\n                    placement:'belowRight',\n                    allow_multiple:false,\n                    global_close: false,\n                    content: this.getContent(model.objectList).render(),\n                    show: true\n                    //onShown: function() { self.setToolsToPopOver(model, elem) },\n                    //onHide: function() { $('ul#leftMenu li').removeClass('active') }\n                });\n\n            },\n            getContent: function(sources) {\n                var objectList = new UserSource.Collection();\n                var cntview = new UserSource.Views.List({\n                    el: \".popover-content\",\n                    collection: objectList\n                });\n                return cntview;\n                /*this.insertView(\"ul\", ).$el;*/\n            }\n        });\n\n        LeftMenu.Views.List = Backbone.View.extend({\n            template: \"leftmenu/list\",\n\n            itemName: \"leftMenu\",\n            className: \"nav nav-list\",\n\n            serialize: function() {\n                return {\n                    count: this.collection.length\n                };\n            },\n\n            beforeRender: function() {\n                this.collection.each(function(leftmenu) {\n                    this.insertView(\"ul\", new LeftMenu.Views.Item({\n                        model: leftmenu\n                    }));\n                }, this);\n\n            },\n\n            cleanup: function() {\n                this.collection.off(null, null, this);\n            },\n\n            initialize: function() {\n                this.collection.on(\"reset\", this.render, this);\n                this.collection.on(\"fetch\", function() {\n\n                }, this);\n            }\n\n\n        });\n\n        return LeftMenu;\n\n    });\n"]],"start1":0,"start2":0,"length1":0,"length2":4708}]],"length":4708}
{"contributors":[],"silentsave":false,"ts":1349090378114,"patch":[[{"diffs":[[0,"    "],[-1,"return "],[1,"this.$el.append("],[0,"cntview"],[1,")"],[0,";\n  "]],"start1":3673,"start2":3673,"length1":22,"length2":32}]],"length":4718,"saved":false}
{"ts":1349090449432,"patch":[[{"diffs":[[0,"tview);\n"],[1,"                return cntview;\n"],[0,"        "]],"start1":3695,"start2":3695,"length1":16,"length2":48}]],"length":4750,"saved":false}
{"ts":1349090521500,"patch":[[{"diffs":[[0,"   content: "],[1,"'',//"],[0,"this.getCont"]],"start1":3097,"start2":3097,"length1":24,"length2":29}]],"length":4755,"saved":false}
{"ts":1349090595931,"patch":[[{"diffs":[[0," allow_multiple:"],[-1,"fals"],[1,"tru"],[0,"e,\n             "]],"start1":3016,"start2":3016,"length1":36,"length2":35}]],"length":4754,"saved":false}
{"ts":1349090642637,"patch":[[{"diffs":[[0,".Views;\n"],[1,"                /*"],[0,"\n       "]],"start1":2741,"start2":2741,"length1":16,"length2":34},{"diffs":[[0,"             });"],[1," */"],[0,"\n\n            },"]],"start1":3379,"start2":3379,"length1":32,"length2":35}]],"length":4775,"saved":false}
