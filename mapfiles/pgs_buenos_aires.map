#
# Start of map file
#
MAP
  NAME ITASCA
  STATUS ON
  SIZE 600 600
  CONFIG "MS_ERRORFILE" "/home/yodeski/sites/mapserverdemo/tmp/ms_error.txt"
  DEBUG 0
  EXTENT  -73.181864 -55.087901 -53.514711 -21.721789
  UNITS METERS
  SHAPEPATH "data"
  TEMPLATEPATTERN "itasca"
  TRANSPARENT ON
  IMAGECOLOR 255 255 255
  IMAGETYPE png

OUTPUTFORMAT
  NAME "png"
  DRIVER AGG/PNG
  MIMETYPE "image/png"
  IMAGEMODE RGBA
  EXTENSION "png"
  FORMATOPTION "GAMMA=0.75"
END


  #
  # Projection definition, consult the PROJ.4 documentation for parameter discussion
  #
  PROJECTION
  #   "proj=utm"
  #   "ellps=GRS80"
  #   "zone=15"
  #   "north"
  #   "no_defs"
  #
  #   OR: 
  #
  	"proj=latlong"
  	"ellps=WGS84"
  	"datum=WGS84"
  END

  #
  # Start of symbol definitions (we're only using a few)
  #
  SYMBOL
    NAME 'circle'
    TYPE ELLIPSE
    POINTS 1 1 END
    FILLED TRUE
  END

  SYMBOL
    NAME 'star'
    TYPE VECTOR
    FILLED TRUE
    POINTS
      0 .375
      .35 .375
      .5 0
      .65 .375
      1 .375
      .75 .625
      .875 1
      .5 .75
      .125 1
      .25 .625
    END
  END 

  #
  # Start of web interface definition (including WMS enabling metadata)
  #
  WEB
    HEADER templates/header.html
    TEMPLATE "index.html"
    FOOTER templates/footer.html    
    MINSCALE 1000
    MAXSCALE 1550000

    # change the next two lines to match your setup
    IMAGEPATH "/home/yodeski/sites/mapserverdemo/tmp/"
    IMAGEURL "/tmp/"

    METADATA
      WMS_TITLE "UMN MapServer Itasca Demo"
      WMS_ABSTRACT "This is a UMN MapServer application for Itasca County located in north central Minnesota."
      WMS_ACCESSCONSTRAINTS "none"

      # change this value to match your setup
      WMS_ONLINERESOURCE "http://localhost/index.html"

      WMS_SRS "EPSG:900913"
    END
  END

  #
  # Start of reference map
  #
  REFERENCE
    IMAGE graphics/reference.png
    EXTENT 393234.393701263 5205405.16440722 495769.579718949 5307959.02579127
    SIZE 120 120
    STATUS ON
    MINBOXSIZE 5
    MAXBOXSIZE 100
    COLOR 255 0 0
    OUTLINECOLOR 0 0 0
    MARKERSIZE 8
    MARKER 'star'
  END

  #
  # Start of legend
  #
  LEGEND
    KEYSIZE 18 12
    LABEL
      TYPE BITMAP
      SIZE MEDIUM        
      COLOR 0 0 89
    END
    STATUS ON
  END

  #
  # Start of scalebar
  #
  SCALEBAR
    IMAGECOLOR 0 0 0
    LABEL
      COLOR 255 255 255
      SIZE TINY
    END
    STYLE 1
    SIZE 100 2
    COLOR 255 255 255
    UNITS MILES
    INTERVALS 1
    TRANSPARENT TRUE
    STATUS ON
  END
  
  #
  # Start of layer definitions
  #

LAYER 
  CONNECTIONTYPE postgis 
  NAME "lineassubte" 
  CONNECTION "user=postgres dbname=pgs_buenos_aires password=vivirencanada host=localhost"
  PROCESSING "CLOSE_CONNECTION=DEFER"
  DATA "the_geom from lineassubte"
  TYPE LINE 
  CLASS 
    STYLE
      COLOR 255 22 55 
      WIDTH 1 
    END
  END  
END

LAYER 
  CONNECTIONTYPE postgis 
  NAME "waterways" 
  CONNECTION "user=postgres dbname=pgs_buenos_aires password=vivirencanada host=localhost"
  PROCESSING "CLOSE_CONNECTION=DEFER"
  DATA "the_geom from waterways" 
  TYPE LINE 
  CLASS 
    STYLE
      COLOR 22 22 255 
      WIDTH 1 
    END
  END  
END

LAYER 
  CONNECTIONTYPE postgis 
  NAME "roads" 
  CONNECTION "user=postgres dbname=pgs_buenos_aires password=vivirencanada host=localhost"
  PROCESSING "CLOSE_CONNECTION=DEFER"
  DATA "the_geom from roads" 
  TYPE LINE 
  CLASS 
    STYLE
      COLOR 22 22 255 
      WIDTH 1 
    END
  END  
END

LAYER 
  CONNECTIONTYPE postgis 
  NAME "estacionessubte"
  TYPE POINT 
  CONNECTION "user=postgres dbname=pgs_buenos_aires password=vivirencanada host=localhost"
  PROCESSING "CLOSE_CONNECTION=DEFER"
  DATA "the_geom from estacionessubte" 
  CLASS 
      STYLE
        COLOR 250 250 250
	OUTLINECOLOR 255 22 55        
	SYMBOL 'circle'
        SIZE 14
      END
  END  
END

LAYER 
  CONNECTIONTYPE postgis 
  NAME "landuse"
  TYPE POLYGON 
  CONNECTION "user=postgres dbname=pgs_buenos_aires password=vivirencanada host=localhost"
  PROCESSING "CLOSE_CONNECTION=DEFER"
  DATA "the_geom from landuse" 
  CLASS 
      STYLE
        OUTLINECOLOR 40 140 40
        COLOR 130 255 130
      END
  END  
END

END # Map File
